---
sidebar: sidebar
permalink: task_setting_up_permissions_fsx.html
keywords: fsx for ontap, iam, user role, permissions
summary: In order to create or manage your Amazon FSx for ONTAP working environment, you need to have an AWS access key and secret key for an IAM user role with FSx for ONTAP permissions.
---

= Set up permissions for FSx for ONTAP
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
To create or manage an Amazon FSx for ONTAP working environment, you need an AWS access key and secret key for an IAM user with FSx for ONTAP permissions. These permissions are different from the permissions required to create a Connector in AWS.

//NOTE: You can create a new IAM user with FSx for ONTAP permissions or edit an IAM user group to include the additional FSx for ONTAP permissions. We recommend the latter to avoid having to use multiple keys for your Connector and for FSx for ONTAP access.

.Steps

To grant FSx for ONTAP permissions to a user, you need to create a new IAM policy or edit an exiting policy. You can then attach the policy to a user or user group.

. To create a new policy:

.. From the AWS IAM console, Click *Create Policy*.
.. Using the JSON editor, paste the following policy:
+
[source,json]
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "VisualEditor0",
            "Effect": "Allow",
            "Action": [
                "fsx:*",
                "ec2:Describe*",
                "ec2:CreateTags",
                "kms:Describe*",
                "kms:List*",
                "iam:CreateServiceLinkedRole"
            ],
            "Resource": "*"
        }
    ]
}
https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_create.html[AWS Documentation: Creating IAM Policies^]

.. Open the Visual Editor tab to confirm the correct configuration. Click *Next: Tags*.
+
image:screenshot_fsx_console_policy_confirm.png[Screenshot of FSx policy confirmation in console Visual Editor]

.. Optionally, add any tags to help you organize your policies. Click *Next: Review*.
.. Confirm your policy configuration and click *Create Policy*.
.. Type a name and description for your policy and click *Create Policy*.

. To edit an existing policy:

.. From the AWS IAM console, select the policy you want to edit.
+
image:screenshot_fsx_console_policy_edit.png[Screenshot of selecting a policy to edit from AWS console]

.. Edit the policy to include the following actions for FSx for ONTAP:
+
[source,json]
            "Action": [
                "fsx:*",
                "ec2:Describe*",
                "ec2:CreateTags",
                "kms:Describe*",
                "kms:List*",
                "iam:CreateServiceLinkedRole"

. Attach the policy you created or edited in the previous step to an IAM user group or directly to a specific IAM user.
+
https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html[Creating an IAM user in your AWS account^]
+
https://docs.aws.amazon.com/IAM/latest/UserGuide/id_groups_create.html[Creating IAM user groups^]

.Result

The AWS user now has permissions required for FSx for ONTAP in Cloud Manager.

== Related links

* link:concept_accounts_aws.html[AWS credentials and permissions]
* link:task_creating_connectors_aws.html[Create a Connecter in AWS]
* link:task_adding_aws_accounts.html[Managing AWS credentials for Cloud Manager]
* link:reference_permissions.html#what-cloud-manager-does-with-aws-permissions[What Cloud Manager does with AWS permissions]
