---
sidebar: sidebar
permalink: task_define_templates.html
keywords: templates, resource templates, services templates, volume templates, cvo working environment template, find volumes
summary: Select one or more of the NetApp-provided "actions" and quickly build an application template that your organization can use to start optimizing the creation of resources.
---

= Build application templates for your organization
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
Select one or more of the NetApp-provided "actions" and quickly build an application template that your organization can use to start optimizing the creation of resources.

== Quick start

Get started quickly by following these steps, or scroll down to the remaining sections for full details.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-1.png[One] Verify required prerequisites

[role="quick-margin-list"]
* Before users can create a volume for a Cloud Volumes ONTAP, on-premises ONTAP, or Azure NetApp Files system using a template, make sure they have access to an appropriate working environment where the volume will be deployed.

[role="quick-margin-list"]
* If you plan to add a Cloud service "action" to your template, such as link:concept_backup_to_cloud.html[Cloud Backup^] or link:concept_cloud_compliance.html[Cloud Data Sense^], ensure that the service is active and licensed in your environment.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-2.png[Two] Launch the Application Templates service

[role="quick-margin-para"]
Select the *AppTemplate* service, click the *Editor* tab, and select the actions you'll use in your template.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-3.png[Three] Build the template by selecting "actions" and defining parameters

[role="quick-margin-para"]
Follow the creation steps and define the actions that will be performed by the template.

== Requirements

Read the following requirements to make sure that you have a supported configuration.

* If you don't already have a Connector, link:concept_connectors.html[see how to create Connectors^] for AWS, Azure, and GCP.

* When creating a Cloud Volumes ONTAP volume template, make sure you have a Cloud Volumes ONTAP working environment available for your users. See how to launch a Cloud Volumes ONTAP system in link:task_deploying_otc_aws.html[AWS^], link:task_deploying_otc_azure.html[Azure^], or in link:task_deploying_gcp.html[GCP^].

* When creating an on-premises ONTAP volume template, make sure you have an on-premises ONTAP working environment available for your users. See how to link:task_discovering_ontap.html[discover an on-premises ONTAP system^] in Cloud Manager.

* When creating an Azure NetApp Files volume template, make sure you have an Azure NetApp Files working environment available for your users. See how to link:task_manage_anf.html[create an Azure NetApp Files working environment^] in Cloud Manager.

* If you plan to use Cloud Backup to backup up a volume in the template, ensure that your environment has activated Cloud Backup.

* If you plan to use Cloud Data Sense to scan volumes in the template, ensure that your environment has activated Cloud Data Sense.

* If you plan to enable Replication in the template, and the template is for an on-premises ONTAP volume, the ONTAP cluster must have an active SnapMirror license.

== Examples of creating resources using templates

Resource templates enable you to create new volumes or a new Cloud Volumes ONTAP working environment.

=== Create a template for a Cloud Volumes ONTAP volume

See link:task_provisioning_storage.html#creating-flexvol-volumes[how to provision Cloud Volumes ONTAP volumes^] for details about all the parameters you need to complete in the Cloud Volumes ONTAP volume template.

For this example we'll create a template named "CVO volume for databases" and include the following 2 actions:

*	Create Cloud Volumes ONTAP Volume
+
Make the volume for the AWS environment, configure it with 100 GB of storage, set the Snapshot Policy to "default", and enable Storage Efficiency.

*	Enable Cloud Backup
+
Create 30 daily, 13 weekly, and 3 monthly backups (using the _3 Months Retention_ policy).

.Steps

. Select the *AppTemplate* service, click the *Templates* tab, and click *Add New Template*.
+
The _Select_a Template_ page is displayed.
+
image:screenshot_create_template_primary_action_cvo.png[A screenshot showing how to select the primary action that will be performed using this template.]

. Select *Volume for Cloud Volumes ONTAP + Backup* as the type of resource you want to create, and click *Get Started*.
+
The _Create Volume in Cloud Volumes ONTAP Action Definition_ page is displayed.
+
image:screenshot_create_template_define_action_cvo.png[A screenshot showing a blank CVO template that you need to fill in.]

. *Action Name*: Optionally, enter a customized action name instead of the default value.

. *Context:* Enter the Cloud Volumes ONTAP working environment context; if required.
+
When users launch the template from an existing working environment, this information gets filled in automatically.
+
When users launch the template from the Templates Dashboard (not in a working environment context), then they need to select the working environment and the SVM where the volume will be created. That's why these fields are marked as "Editable".

. *Details:* Enter the volume name and size.
+
[cols=2*,options="header",cols="25,75"]

|===
| Field
| Description

| Volume Name | Click in the field and select one of the 5 options. You can let the admin enter any name by selecting *Free Text*, or you can specify that the volume name must have a certain prefix or suffix, that it _contains_ certain characters, or that it follows rules from a regular expression (regex) you enter.

For example, you could specify that "db" be a required prefix, suffix, or contains; requiring the user to add volume names like "db_vol1", "vol1_db", or "vol_db_1".

| Volume Size | You can specify a range of allowable values, or you can specify a fixed size. This value is in GB. For our example we can add a fixed value *100*.

| Tags | Enter a name and value pair for a tag that you want to associate with this volume. For example, you could add "Cost Center" as the tag name and the cost center code "6655829" as the value. You can associate more than one tag with a volume by adding more tag name and value pairs.

|===

. *Protection:* Choose whether this volume will have Snapshot copies created by selecting "Default" or some other policy, or choose "None" if you do not want to create Snapshot copies.

. *Usage Profile:* Choose whether or not NetApp storage efficiency features are applied to the volume. This includes Thin Provisioning, Deduplication, and Compression. For our example, keep storage efficiency enabled.

. *Disk Type:* Choose the cloud storage provider and the type of disk. For some disk selections you can also select a minimum and maximum IOPS or Throughput (MB/s) value; basically defining a certain Quality of Service (QoS).

. *Protocol Options:* Select *NFS* or *SMB* to set the protocol of the volume. And then the provide the protocol details.
+
[cols=2*,options="header",cols="25,75"]

|===
| NFS Fields
| Description

| Access Control | Choose whether access controls are needed to access the volume.

| Export Policy | Create an export policy to define the clients in the subnet that can access the volume.

| NFS Version | Select the NFS version for the volume: either _NFSv3_ or _NFSv4_, or you can select both.

|===
+
[cols=2*,options="header",cols="25,75"]

|===
| SMB Fields
| Description

| Share Name | Click in the field and select one of the 5 options. You can let the admin enter any name (Free Text) or you can specify that the share name must have a certain prefix or suffix, that it _contains_ certain characters, or that it follows rules from a regular expression (regex) you enter.

| Permissions | Select the level of access to a share for users and groups (also called access control lists, or ACLs).

| Users / Groups | Specify local or domain Windows users or groups, or UNIX users or groups. If you specify a domain Windows user name, you must include the user's domain using the format domain\username.

|===

. *Tiering:* Choose the tiering policy that you would like applied to the volume, or set this to "None" if you do not want to tier cold data from this volume to object storage.
+
See link:concept_data_tiering.html#volume-tiering-policies[volume tiering policies^] for an overview, and see link:task_tiering.html[Tiering inactive data to object storage^] to make sure your environment is set up for tiering.

. Click *Apply* after you have defined the parameters needed for this action.
+
If the template values are correctly completed, a green checkmark is added to the "Create Volume in Cloud Volumes ONTAP" box.

. Click the *Enable Cloud Backup on Volume* box and the _Enable Cloud Backup on Volume Action Definition_ dialog is displayed so you can fill in the Cloud Backup details.
+
image:screenshot_create_template_add_action.png[A screenshot showing additional actions that you can add to the created volume.]

. Select the *3 Months Retention* backup policy to create 30 daily, 13 weekly, and 3 monthly backups.

. Below the Working Environment and Volume Name fields there are three selections you use to indicate which volume will have backup enabled. See <<Pass values between template actions,how to complete these fields>>.

. Click *Apply* and the Cloud Backup dialog is saved.

. Enter the template name *CVO volume for databases* (for this example) in the top left.

. Click *Settings & Drift* to provide a more detailed description so that this template can be distinguished from other similar templates, and so you can enable Drift for the overall template, and then click *Apply*.
+
Drift allows Cloud Manager to monitor the hard-coded values you entered for parameters when creating this template.

. Click *Save Template*.

.Result

The template is created and you are returned to the Templates Dashboard where your new template appears.

See <<What to do after you have created the template,what you should tell your users about templates>>.

=== Create a template for an Azure NetApp Files volume

Creating a template for an Azure NetApp Files volume is done in the same manner as creating a template for a Cloud Volumes ONTAP volume.

See link:task_manage_anf_volumes.html#creating-volumes[how to provision Azure NetApp Files volumes^] for details about all the parameters you need to complete in the ANF volume template.

.Steps

. Select the *AppTemplate* service, click the *Templates* tab, and click *Add New Template*.
+
The _Select_a Template_ page is displayed.
+
image:screenshot_create_template_primary_action_blank.png[A screenshot showing how to select the primary action that will be performed using this template.]

. Select *Blank template* and click *Get Started*.

. Select *Create Volume in Azure NetApp Files* as the type of resource you want to create, and click *Apply*.
+
The _Create Volume in Azure NetApp Files Action Definition_ page is displayed.
+
image:screenshot_create_template_define_action_anf.png[A screenshot showing a blank ANF template that you need to fill in.]

. *Action Name*: Optionally, enter a customized action name instead of the default value.

. *Volume Details:* Enter a volume name and size, and optionally specify tags for the volume.
+
[cols=2*,options="header",cols="25,75"]

|===
| Field
| Description

| Volume Name | Click in the field and select one of the 5 options. You can let the admin enter any name by selecting *Free Text*, or you can specify that the volume name must have a certain prefix or suffix, that it _contains_ certain characters, or that it follows rules from a regular expression (regex) you enter.

For example, you could specify that "db" be a required prefix, suffix, or contains; requiring the user to add volume names like "db_vol1", "vol1_db", or "vol_db_1".

| Volume Size | You can specify a range of allowable values, or you can specify a fixed size. This value is in GB.

| Tags | Enter a name and value pair for a tag that you want to associate with this volume. For example, you could add "Cost Center" as the tag name and the cost center code "6655829" as the value. You can associate more than one tag with a volume by adding more tag name and value pairs.

|===

. *Protocol:* Select *NFSv3*, *NFSv4.1*, or *SMB* to set the protocol of the volume. And then the provide the protocol details.
+
[cols=2*,options="header",cols="25,75"]

|===
| NFS Fields
| Description

| Volume Path | Select one of the 5 options. You can let the admin enter any path by selecting *Free Text*, or you can specify that the path name must have a certain prefix or suffix, that it _contains_ certain characters, or that it follows rules from a regular expression (regex) you enter.

| Export Policy Rules | Create an export policy to define the clients in the subnet that can access the volume.

|===
+
[cols=2*,options="header",cols="25,75"]

|===
| SMB Fields
| Description

| Volume Path | Select one of the 5 options. You can let the admin enter any path by selecting *Free Text*, or you can specify that the path name must have a certain prefix or suffix, that it _contains_ certain characters, or that it follows rules from a regular expression (regex) you enter.

|===

. *Context:* Enter the Azure NetApp Files working environment, details for a new or an existing Azure NetApp Files account, and other details.
+
[cols=2*,options="header",cols="25,75"]

|===
| Field
| Description

| Working Environment | When storage admin users launch the template from an existing working environment, this information gets filled in automatically.

When users launch the template from the Templates Dashboard (not in a working environment context), then they need to select the working environment where the volume will be created.

| NetApp Account Name | Enter the name you want to use for the account.

| Azure Subscription ID | Enter the Azure Subscription ID. This is the full ID in a format similar to "2b04f26-7de6-42eb-9234-e2903d7s327".

| Region | Enter the region using the https://docs.microsoft.com/en-us/dotnet/api/microsoft.azure.documents.locationnames?view=azure-dotnet#fields[internal region name^].

| Resource Group Name | Enter the name of the Resource Group you want to use.

| Capacity Pool Name | Enter the name of an existing capacity pool.

| Subnet | Enter the VNet and subnet. This value includes the full path, in a format similar to "/subscriptions/<subscription_id>/resourceGroups/<resource_group>/ providers/Microsoft.Network/virtualNetworks/<vpc_name>/subnets/<subhet_name>".

|===

. *Snapshot Copy:* Enter the Snapshot ID for an existing volume Snapshot if you want this new volume to be created using characteristics from an existing volume.

. Click *Apply* after you have defined the parameters needed for this action.

. Enter the name you want to use for the template in the top left.

. Click *Settings & Drift* to provide a more detailed description so that this template can be distinguished from other similar templates, and so you can enable Drift for the overall template, and then click *Apply*.
+
Drift allows Cloud Manager to monitor the hard-coded values you entered for parameters when creating this template.

. Click *Save Template*.

.Result

The template is created and you are returned to the Templates Dashboard where your new template appears.

See <<What to do after you have created the template,what you should tell your users about templates>>.

=== Create a template for an on-premises ONTAP volume

See link:task_provisioning_ontap.html#creating-volumes-for-ontap-clusters[how to provision on-premises ONTAP volumes^] for details about all the parameters you need to complete in the on-premises ONTAP volume template.

.Steps

. Select the *AppTemplate* service, click the *Templates* tab, and click *Add New Template*.
+
The _Select_a Template_ page is displayed.
+
image:screenshot_create_template_primary_action_blank.png[A screenshot showing how to select the primary action that will be performed using this template.]

. Select *Blank template* and click *Get Started*.
+
The _Add New Action_ page is displayed.
+
image:screenshot_create_template_primary_action_onprem.png[A screenshot showing how to select the primary action from the Add New Action page.]

. Select *Create Volume in On-Premises ONTAP* as the type of resource you want to create, and click *Apply*.
+
The _Create Volume in On-Premises ONTAP Action Definition_ page is displayed.
+
image:screenshot_create_template_define_action_onprem.png[A screenshot showing a blank onprem ONTAP template that you need to fill in.]

. *Action Name*: Optionally, enter a customized action name instead of the default value.

. *Context:* Enter the on-premises ONTAP working environment context; if required.
+
When users launch the template from an existing working environment, this information gets filled in automatically.
+
When users launch the template from the Templates Dashboard (not in a working environment context), then they need to select the working environment, the SVM, and the aggregate where the volume will be created.

. *Details:* Enter the volume name and size.
+
[cols=2*,options="header",cols="25,75"]

|===
| Field
| Description

| Volume Name | Click in the field and select one of the 5 options. You can let the admin enter any name by selecting *Free Text*, or you can specify that the volume name must have a certain prefix or suffix, that it _contains_ certain characters, or that it follows rules from a regular expression (regex) you enter.

For example, you could specify that "db" be a required prefix, suffix, or contains; requiring the user to add volume names like "db_vol1", "vol1_db", or "vol_db_1".

| Volume Size | You can specify a range of allowable values, or you can specify a fixed size. This value is in GB. For our example we can add a fixed value *100*.

| Tags | Enter a name and value pair for a tag that you want to associate with this volume. For example, you could add "Cost Center" as the tag name and the cost center code "6655829" as the value. You can associate more than one tag with a volume by adding more tag name and value pairs.

|===

. *Protection:* Choose whether this volume will have Snapshot copies created by selecting "Default" or some other policy, or choose "None" if you do not want to create Snapshot copies.

. *Usage Profile:* Choose whether or not NetApp storage efficiency features are applied to the volume. This includes Thin Provisioning, Deduplication, and Compression.

. *Protocol Options:* Select *NFS* or *SMB* to set the protocol of the volume. And then the provide the protocol details.
+
[cols=2*,options="header",cols="25,75"]

|===
| NFS Fields
| Description

| Access Control | Choose whether access controls are needed to access the volume.

| Export Policy | Create an export policy to define the clients in the subnet that can access the volume.

| NFS Version | Select the NFS version for the volume: either _NFSv3_ or _NFSv4_, or you can select both.

|===
+
[cols=2*,options="header",cols="25,75"]

|===
| SMB Fields
| Description

| Share Name | Click in the field and select one of the 5 options. You can let the admin enter any name (Free Text) or you can specify that the share name must have a certain prefix or suffix, that it _contains_ certain characters, or that it follows rules from a regular expression (regex) you enter.

| Permissions | Select the level of access to a share for users and groups (also called access control lists, or ACLs).

| Users / Groups | Specify local or domain Windows users or groups, or UNIX users or groups. If you specify a domain Windows user name, you must include the user's domain using the format domain\username.

|===

. Click *Apply* after you have defined the parameters needed for this action.
+
If the template values are correctly completed, a green checkmark is added to the "Create Volume in On-Premises ONTAP" box.

. Enter the template name in the top left.

. Click *Settings & Drift* to provide a more detailed description so that this template can be distinguished from other similar templates, and so you can enable Drift for the overall template, and then click *Apply*.
+
Drift allows Cloud Manager to monitor the hard-coded values you entered for parameters when creating this template.

. Click *Save Template*.

.Result

The template is created and you are returned to the Template Dashboard where your new template appears.

See <<What to do after you have created the template,what you should tell your users about templates>>.

=== Create a template for a Cloud Volumes ONTAP working environment

You can create a Cloud Volumes ONTAP working environment using templates.

[NOTE]
====
* This support is provided only for AWS environments at this time, and only for single-node clusters.
* This template doesn't create the first volume in the working environment. You must add a "Create Volume in Cloud Volumes ONTAP" action in the template to create the volume.
====

See link:task_deploying_otc_aws.html#launching-a-single-node-cloud-volumes-ontap-system-in-aws[how to launch a single-node Cloud Volumes ONTAP system in AWS^] for the prerequisites that must be in place, and for details about all the parameters you need to complete in this template.

.Steps

. Select the *AppTemplate* service, click the *Templates* tab, and click *Add New Template*.
+
The _Select_a Template_ page is displayed.
+
image:screenshot_create_template_primary_action_blank.png[A screenshot showing how to select the primary action that will be performed using this template.]

. Select *Blank template* and click *Get Started*.
+
The _Add New Action_ page is displayed.
+
image:screenshot_create_template_cvo_env_aws.png[A screenshot showing how to select the primary action from the Add New Action page.]

. Select *Create Working Environment in AWS (single node)* as the type of resource you want to create, and click *Apply*.
+
The _Create Working Environment in AWS (single node)_ page is displayed.
+
image:screenshot_create_template_cvo_env_aws1.png[A screenshot showing a blank Cloud Volumes ONTAP working environment template that you need to fill in.]

. *Action Name*: Optionally, enter a customized action name instead of the default value.

. *Details and Credentials*: Select the AWS credentials to use, enter a working environment name, and add tags, if needed.
+
Some of the fields in this page are self-explanatory. The following table describes fields for which you might need guidance:
+
[cols=2*,options="header",cols="25,75"]
|===
| Field
| Description

| Credentials | These are the credentials for the Cloud Volumes ONTAP cluster admin account. You can use these credentials to connect to Cloud Volumes ONTAP through ONTAP System Manager or its CLI.

| Working Environment Name | Cloud Manager uses the working environment name to name both the Cloud Volumes ONTAP system and the Amazon EC2 instance. It also uses the name as the prefix for the predefined security group, if you select that option.

Click in the field and select one of the 5 options. You can let the admin enter any name by selecting *Free Text*, or you can specify that the working environment name must have a certain prefix or suffix, that it _contains_ certain characters, or that it follows rules from a regular expression (regex) you enter.

| Tags | AWS tags are metadata for your AWS resources. Cloud Manager adds the tags to the Cloud Volumes ONTAP instance and each AWS resource associated with the instance.

For information about tags, refer to https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html[AWS Documentation: Tagging your Amazon EC2 Resources^].

|===

. *Location & Connectivity*: Enter the network information that you recorded in the link:task_planning_your_config.html#aws-network-information-worksheet[AWS worksheet]. This includes the AWS Region, VPC, Subnet, and Security Group.
+
If you have an AWS Outpost, you can deploy a single node Cloud Volumes ONTAP system in that Outpost by selecting the Outpost VPC. The experience is the same as any other VPC that resides in AWS.

. *Authentication Method*: Select the SSH authentication method you want to use; either a password or a key pair.

. *Data Encryption*: Choose no data encryption or AWS-managed encryption.
+
For AWS-managed encryption, you can choose a different Customer Master Key (CMK) from your account or another AWS account.
+
link:task_setting_up_kms.html[Learn how to set up the AWS KMS for Cloud Volumes ONTAP].

. *Charging Method*: Specify which charging option would you like to use with this system.
+
link:concept_licensing.html[Learn about these charging methods].

. *NetApp Support Site Account*: Select a NetApp Support Site account.

. *Preconfigured Packages*: Select one of the four preconfigured packages that will determine several factors for volumes created in the working environment.

. *SMB Configuration*: If you plan to deploy volumes using SMB on this working environment, you can set up a CIFS server and related configuration elements.

. Click *Apply* after you have defined the parameters needed for this action.
+
If the template values are correctly completed, a green checkmark is added to the "Create Working Environment in AWS (single node)" box.

. You may want to add another action in this template to create a volume for this working environment. If so, click image:button_plus_sign_round.png[] and add that action. See how to <<Create a template for a Cloud Volumes ONTAP volume,Create a template for a Cloud Volumes ONTAP volume>> for details.

. Enter the template name in the top left.

. Click *Settings & Drift* to provide a more detailed description so that this template can be distinguished from other similar templates, and so you can enable Drift for the overall template, and then click *Apply*.
+
Drift allows Cloud Manager to monitor the hard-coded values you entered for parameters when creating this template.

. Click *Save Template*.

.Result

The template is created and you are returned to the Template Dashboard where your new template appears.

See <<What to do after you have created the template,what you should tell your users about templates>>.

== Examples of finding existing resources and enabling services using templates

Using the _Find Existing Resources_ action you can find existing resources and enable a cloud service on those resources. This action provides a variety of filters so you can narrow your search to just the resources you are interested in.

NOTE: At this time you can find volumes within Cloud Volumes ONTAP, on-premises ONTAP, and Azure NetApp Files systems only. And you can enable only Cloud Backup on Cloud Volumes ONTAP and on-premises ONTAP volumes. Additional resources and services will be available at a later time.

=== Find existing volumes and activate Cloud Backup

The current functionality enables you to find volumes on Cloud Volumes ONTAP and on-premises ONTAP working environments that do not currently have Cloud Backup enabled. When you enable Cloud Backup on specific volumes, this action also sets the backup policy you configure as the default policy for that working environment. So all future volumes on those working environments can use the same backup policy.

.Steps

. Select the *AppTemplate* service, click the *Templates* tab, and click *Add New Template*.
+
The _Select_a Template_ page is displayed.
+
image:screenshot_create_template_primary_action_blank.png[A screenshot showing how to select the primary action that will be performed using this template.]

. Select *Blank template* and click *Get Started*.
+
The _Add New Action_ page is displayed.
+
image:screenshot_create_template_find_resource_action.png[A screenshot showing how to select the Find Existing Resources action from the Add New Action page.]

. Select *Find Existing Resources* as the type of action you want to define, and click *Apply*.
+
The _Find Existing Resources Action Definition_ page is displayed.
+
image:screenshot_define_find_resource_action1.png[A screenshot showing a blank find existing resources template that you need to fill in.]

. *Action Name*: Enter a customized action name instead of the default value. For example, "Find large volumes on cluster ABC and enable Backup".

. *Resource Type:* Select the type of resource you want to find. In this case you might select *Volumes in Cloud Volumes ONTAP*.
+
This is the only required entry for this action. You could click *Continue* now and you'll receive a list of all volumes on all Cloud Volumes ONTAP systems in your environment.
+
Instead, it is recommended that you fill out a few filters to reduce the number of results (in this case, volumes) on which you'll apply the Cloud Backup action.

. In the _Context_ area you can select a specific working environment and some other details about that working environment.
+
image:screenshot_define_find_resource_filter_context.png[A screenshot showing the Context filters you can apply to the find existing resources template.]

. In the _Details_ area you can select a volume name and the volume size.
+
For the volume name, click in the field and select one of the 5 options. You can let the admin enter any name by selecting *Free Text*, or you can specify that the volume name must have a certain prefix or suffix, that it _contains_ certain characters, or that it follows rules from a regular expression (regex) you enter.
+
For volume size you can specify a range; for example, all volumes between 100 GiB and 500 GiB.
+
image:screenshot_define_find_resource_filter_details.png[A screenshot showing the Details filters you can apply to the find existing resources template.]

. Click *Continue* and the page updates to show the Search Criteria that you've defined in the template.
+
image:screenshot_define_find_resource_search_criteria.png[A screenshot showing the search criteria you have defined for the find existing resources template.]

. Click *Test your search criteria now* to see the current results.

* If the results are not what you expected, click image:screenshot_edit_icon.gif[edit pencil icon] next to _Search Criteria_ and refine your search further.
* When the results are good, click *Done*.
+
Your completed _Find Existing Resources_ action appears in the editor window.

. Click the Plus sign to add another action, select *Enable Cloud Backup On Volume*, and click *Apply*.
+
The _Enable Cloud Backup On Volume_ action is added to the window.
+
image:screenshot_template_add_backup_action.png[A screenshot showing the steps to add a Cloud Backup action to your template.]

. Now you can define the Backup criteria as described in <<Add Backup functionality to a volume,Adding Backup functionality to a volume>> so that the template applies the correct backup policy to the volumes you select from the _Find Existing Resources_ action.

. Click *Apply* to save the customization you made to the Backup action, and then click *Save Template* when you are done.

.Result

The template is created and you are returned to the Template Dashboard where your new template appears.

See <<What to do after you have created the template,what you should tell your users about templates>>.

== Examples of enabling services using templates

Service templates enable you to activate Cloud Backup, Cloud Data Sense, or Replication (SnapMirror) services on a newly created volume.

=== Add Backup functionality to a volume

When creating a volume template, you can add in the template that you want to create backups of the volume periodically using the link:concept_backup_to_cloud.html[Cloud Backup^] service.

TIP: This action is not applicable for Azure NetApp Files volumes.

image:screenshot_template_backup.png[A screenshot of the page to enable backup functionality for your volumes.]

. *Policy*: Select the backup policy that you want to use.

. *Context*: By default, the variables are filled out for the working environment, storage VM, and volume to indicate that you will be creating backups for the volume created previously in this same template. So if that's what you want to do, you're all set.
+
If you want to create backups for a different volume, you can enter those details manually. See how to link:reference_template_building_blocks.html#pass-values-between-template-actions[complete the Context fields] to indicate a different volume.

. Click *Apply* to save your changes.

=== Add Data Sense functionality to a volume

When creating a volume template, you can add in the template that you want to scan the volume for compliance and classification using the link:concept_cloud_compliance.html[Cloud Data Sense] service.

image:screenshot_template_data_sense.png[A screenshot of the page to enable scanning functionality for your volumes.]

. *Context*: By default, the variables are filled out for the working environment, volume name, volume UUID, volume path, and protocol to indicate that you will be scanning data for the volume created previously in this same template. So if that's what you want to do, you're all set.
+
If you want to scan data for a different volume, you can enter those details manually. See how to link:reference_template_building_blocks.html#pass-values-between-template-actions[complete the Context fields] to indicate a different volume.

. Click *Apply* to save your changes.

=== Add Replication functionality to a volume

When creating a volume template, you can add in the template that you want to replicate the data in the volume to another volume using the link:concept_replication.html[Replication] service. You can replicate data to a Cloud Volumes ONTAP cluster or to an on-prem ONTAP cluster.

TIP: This action is not applicable for Azure NetApp Files volumes.

Replication functionality consists of three parts: selecting the source volume, selecting the destination volume, and defining the replication settings. Each section is described below.

. *Source Details*: Enter the details about the source volume you want to replicate:
+
image:screenshot_template_replication_source.png[A screenshot of the page to define the replication source volume location.]
+
.. By default, the first three variables are filled out for the working environment, storage VM, and volume to indicate that you will be replicating the volume created previously in this same template. So if that's what you want to do, you're all set.
+
If you want to replicate a different volume, you can enter those details manually. See how to link:reference_template_building_blocks.html#pass-values-between-template-actions[complete the Context fields] to indicate a different volume.
+
.. Replication requires that the source and destination working environments are connected through their intercluster LIFs. Enter the intercluster LIF IP address for the source working environment.
+
To get this information: double-click the working environment, click the menu icon, and click Information.

. *Destination Details*: Enter the details about the destination volume that will be created by the replication operation:
+
image:screenshot_template_replication_dest.png[A screenshot of the page to define the replication destination volume location.]
+
.. Select the working environment where the volume will be created.
.. Select the storage VM on which the volume will reside.
.. When replicating a volume to a Cloud Volumes ONTAP cluster (not to an on-prem ONTAP cluster), you need to specify the Destination Provider (AWS, Azure, or GCP).
.. When replicating a volume to a Cloud Volumes ONTAP cluster, you can specify whether volume tiering is enabled on the destination volume.
.. For the destination volume name, click in the field and select one of the 5 options. You can let the admin enter any name by selecting *Free Text*, or you can specify that the volume name must have a certain prefix or suffix, that it _contains_ certain characters, or that it follows rules from a regular expression (regex) you enter.
.. Replication requires that the source and destination working environments are connected through their intercluster LIFs. Enter the intercluster LIF IP address for the destination working environment.
.. Select the aggregate on which the volume will reside.
.. When replicating a volume to a Cloud Volumes ONTAP cluster (not to an on-prem ONTAP cluster), you need to specify the type of disk that will be used for the new volume.

. *Replication Details*: Enter the details about the type and frequency of the replication operation:
+
image:screenshot_template_replication_policy.png[A screenshot of the page to define the replication settings for the relationship.]
+
.. Select the link:concept_replication_policies.html#types-of-replication-policies[replication policy] that you want to use.
.. Choose a one-time copy or a recurring replication schedule.
.. Enable replication health status monitoring if you want the drift report to include the replication health of the SnapMirror relationship along with the lag time, status, and last transfer time. link:task_check_template_compliance.html#replication-health-details-in-the-drift-report[See what this looks like in the drift report].
.. Select whether you want to set a transfer rate limit, and then enter the maximum rate (in kilobytes per second) at which data can be transferred. You can enter a fixed value, or you can provide a minimum and maximum and let the storage admin select a value in that range.

. Click *Apply* to save your changes.

== What to do after you have created the template

After you have created a template, you should inform your storage administrators to use the template when creating new working environments and volumes.

You can point them to link:task_run_templates.html[Creating resources using templates] for details.

== Edit or delete a template

You can modify a template if you need to change any of the parameters. After you save your changes, all future resources created from the template will use the new parameter values.

You can also delete a template if you no longer need it. Deleting a template does not affect any of the resources that were created with the template. However, no Drift compliance checking can be done after the template is deleted.

image:screenshot_template_edit_remove.png[A screenshot showing how to modify a template or delete a template.]

== Make a copy of a template

You can create a copy of an existing template. This can save a lot of time in case you want to create a new template that is very similar to an existing template. Just make the duplicate with a new name, and then you can edit the template to change the couple items that make the template unique.

image:screenshot_template_duplicate.png[A screenshot showing how to duplicate a template.]
